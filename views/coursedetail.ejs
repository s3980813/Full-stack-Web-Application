<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Detail</title>
    <link rel="stylesheet" href="/css/coursedetail.css">
</head>

<body>
    <!-- NavBar Partial -->
    <% include('partials/navbar') %>

        <!-- Search Modal -->
        <div class="modal_search" id="search">
            <a href="#" class="close_search"></a>
            <div class="search_body">
                <input class="search_button" type="text" placeholder="Search" name="search">
            </div>
        </div>
        <!-- End NavBar -->

        <!-- Main Section -->
        <main class="course-detail-container">
            <div class="course-image">
                <img src="course.jpg" alt="Course Image">
            </div>
            <div class="course-info">
                <h2 id="courseTitle">
                    <%= course.title %>
                </h2>
                <p id="courseInstructor">Instructor: <%= course.instructor %>
                </p>
                <p id="coursePrice">$<%= course.price %>
                </p>
                <p id="courseDescription">
                    <%= course.description %>
                </p>
                <label for="category">Category:</label>
                <select id="category" name="category" required>
                    <option value="Programming">Programming</option>
                    <option value="Design">Design</option>
                    <option value="Marketing">Marketing</option>
                    <option value="Business">Business</option>
                    <option value="Other">Other</option>
                </select>

                <div id="actionButtons">
                    <!-- JavaScript will dynamically insert the appropriate buttons here -->
                </div>
            </div>
        </main>

        <!-- Footer Partial -->
        <% include('partials/footer') %>

            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    // Simulated user status (could be 'learner', 'instructor', or 'guest')
                    const userStatus = 'learner';  // Change this to 'instructor' or 'guest' to see different views

                    const actionButtons = document.getElementById('actionButtons');

                    if (userStatus === 'learner') {
                        actionButtons.innerHTML = `
            <button class="trial-button" onclick="startTrial()">Trial For 2-Day</button>
            <button class="enroll-button" onclick="enrollCourse()">Enroll</button>
        `;
                    } else if (userStatus === 'instructor') {
                        actionButtons.innerHTML = `
            <button class="edit-button" onclick="editCourse()">Edit Course</button>
            <button class="delete-button" onclick="deleteCourse()">Delete Course</button>
        `;
                    } else if (userStatus === 'guest') {
                        // No action buttons for guests, only course title and description are shown
                        document.getElementById('courseInstructor').style.display = 'none';
                        document.getElementById('coursePrice').style.display = 'none';
                    }
                });

                // Functions for learners
                function startTrial() {
                    alert('You have started a 2-day trial for this course.');
                    // Add logic to handle trial subscription
                }

                function enrollCourse() {
                    window.location.assign = 'orderPlacement.ejs';  // Redirect to order placement page
                }

                // Functions for instructors
                function editCourse() {
                    alert('You are now editing this course.');
                    // Add logic to redirect to the edit course page
                }

                function deleteCourse() {
                    const confirmation = confirm('Are you sure you want to delete this course?');
                    if (confirmation) {
                        alert('Course deleted successfully.');
                        // Add logic to delete the course
                    }
                }

            </script>
</body>

</html>